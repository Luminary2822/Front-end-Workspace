function grades_alert(){alert("你好，评分环节还未结束，目前无法查看得分详情，请耐心等待!")}var arr=["工作重视","政务环境","法治环境","营商环境","人文环境","服务环境"];$(function(){var a=$("#queryMaterial");for(var c=0,b=1;c<6;c++,b++){var d=$("<option>"+arr[c]+"</option>");d.val(arr[c]+b);a.append(d)}});var module1="";$(function(){initFileInput("input-id")});function initFileInput(a){var b=$("#"+a);b.fileinput({language:"zh",uploadUrl:"/upload/uploadBlog",allowedFileExtensions:["pdf"],maxFileCount:1,uploadAsync:true,showUpload:true,showRemove:true,showPreview:true,showCaption:false,browseClass:"btn btn-primary",maxFileSize:0,enctype:"multipart/form-data",previewFileIcon:"<i class='glyphicon glyphicon-king'></i>",msgFilesTooMany:"一个模块只允许上传一份文件！",uploadExtraData:function(){return{type:"type"}}}).on("filepreupload",function(c,h,k,j){var e=h.form,d=h.files,f=h.extra,g=h.response,i=h.reader;console.log("文件正在上传")}).on("fileuploaded",function(e,f,c,d){console.log("文件上传成功！"+f.id);module1="TYPE_ONE_MODULE"+a.charAt(9);$.ajax({url:"/upload/uploadData",type:"post",contentType:"application/json",data:JSON.stringify({org_id:"",file_name:"",file_url:"",create_at:"",one_type:module1}),dataType:"json",success:function(g){if(g.code!==200){alert("此模块已有文件");return false}},error:function(){alert("此模块已有文件")}})}).on("fileerror",function(c,d,e){console.log("文件上传失败！"+d.id)})}$("#input-id").on("filesuccessremove",function(a,b){if(some_processing_function(b)){console.log("Uploaded thumbnail successfully removed")}else{return false}});function showModule(){var b=document.getElementById("queryMaterial");var c=b.selectedIndex;var a=$("#queryMaterial option:selected");if(!document.getElementById("module_"+c)){$("#module").after('            <div class="module_upload" id="module_" style="display: none">\n                <form id="form" action="" method="post" enctype="multipart/form-data" style="width: 100%;height: 180px;">\n                    <div class="form-group" style="width: 100%;height: 180px;">\n                        <input id="input-id_" name="file" multiple type="file" data-show-caption="true" class="file-loading" accept=".pdf">\n                    </div>\n                </form>\n            </div>');$("#module_").attr("id","module_"+c);$("#input-id_").attr("id","input-id_"+c);initFileInput("input-id_"+c);$("#module_"+c).show();$("#module_"+c).siblings().hide()}if(document.getElementById("module_"+c)){$("#module_"+c).show();$("#module_"+c).siblings().hide()}if(a.text()==="请选择材料模块"){$("#module").show();$("#module").siblings().hide()}}function showList1(){$("#file-table").bootstrapTable("refresh");if(document.getElementById("list_change").innerHTML==="已上传"){document.getElementById("list_change").innerHTML="继续上传";document.getElementById("module_upload").style.display="none";document.getElementById("file_list").style.display="block"}else{document.getElementById("list_change").innerHTML="已上传";document.getElementById("module_upload").style.display="block";document.getElementById("file_list").style.display="none"}}$(function(){initTable()});function list_remove(){var a=$.map($("#file-table").bootstrapTable("getSelections"),function(b){return b.id});if(a.length!=1){alert("请选择一行删除!");return}$("#file-table").bootstrapTable("remove",{field:"id",values:a});$.ajax({type:"POST",url:"/org/deletedFile",data:{id:a[0]},dataType:"JSON",success:function(b){if(b.result!=0){toastr.info("info",b.message);return}toastr.success("success","删除成功");$("#file-table").bootstrapTable("remove",{field:"id",values:a})}})}function initTable(){$("#file-table").bootstrapTable({height:300,method:"post",toolbar:"#toolbar",striped:true,cache:false,pagination:true,sortable:false,sortOrder:"asc",pageNumber:1,pageSize:4,pageList:[4],url:"/org/OrgFilesTable",queryParamsType:"",queryParams:queryParams,sidePagination:"client",strictSearch:true,showRefresh:true,minimumCountColumns:2,clickToSelect:true,searchOnEnterKey:true,columns:[{checkbox:true,visible:true},{title:"ID",field:"id",align:"center"},{field:"file_name",title:"文件名称",align:"center"},{field:"create_at",title:"上传时间",align:"center"},{field:"tree_type",title:"所属模块",align:"center"},{field:"operation",title:"操作",align:"center",formatter:operateFormatter}],responseHandler:function(a){return a.rows}})}function queryParams(b){var a={org_id:orgInfo.org_id,one_type:module1};return a}function operateFormatter(c,d,b){var a='<a href="'+d.file_url+'" class="btn btn-xs green title="预览" target="_blank"><span class="glyphicon glyphicon-search"></span></a>';return a};